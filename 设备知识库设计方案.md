# 设备知识库设计方案

## 概述
为个人学习准备的设备产品知识库，主要功能：
1. 各种工业设备的结构和零件说明
2. 可交互的设备图示和零件关系展示
3. 个人笔记和知识积累

## 界面设计

### 整体布局（百科全书型）
```
┌─────────────────────────────────────────────────────────────┐
│ 🔍 [搜索框]                                   [添加条目] [编辑] │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📋 目录                    │  📄 设备详情页面                │
│                            │                                │
│  ▼ 切割设备                 │  ┌─────────────────────────────┐ │
│    • 激光切割机 ●          │  │     设备整体结构图           │ │
│    • 等离子切割机           │  │                            │ │
│    • 水刀切割机             │  │  ①激光器    ②光学系统       │ │
│                            │  │     │         │            │ │
│  ▼ 成型设备                 │  │     └─────────┘            │ │
│    • 折弯机                 │  │           │                │ │
│    • 冲压机                 │  │         ③切割头             │ │
│                            │  │           │                │ │
│  🏷️ 标签                    │  │      ④工作台面             │ │
│    #核心设备                │  │                            │ │
│    #常用                    │  │  [点击零件查看详情]         │ │
│    #复杂                    │  └─────────────────────────────┘ │
│                            │                                │
│                            │  零件详情面板                   │
│                            │  ┌─────────────────────────────┐ │
│                            │  │ ① 激光器 (当前选中)          │ │
│                            │  │                            │ │
│                            │  │ [激光器细节图片]            │ │
│                            │  │                            │ │
│                            │  │ • 功能：产生高能激光束      │ │
│                            │  │ • 类型：CO2激光器          │ │
│                            │  │ • 功率：1000W-8000W        │ │
│                            │  │ • 位置：设备机身内部        │ │
│                            │  │                            │ │
│                            │  │ 相关连接零件：              │ │
│                            │  │ → ②光学系统 (激光传输)      │ │
│                            │  │ → 电源系统 (供电)          │ │
│                            │  │ → 冷却系统 (散热)          │ │
│                            │  └─────────────────────────────┘ │
│                            │                                │
│                            │  相关图片库                     │
│                            │  ┌─────┬─────┬─────┬─────┐     │
│                            │  │[图1]│[图2]│[图3]│[图4]│     │
│                            │  │实物 │剖面 │安装 │维护 │     │
│                            │  └─────┴─────┴─────┴─────┘     │
│                            │                                │
│                            │  个人笔记                       │
│                            │  ┌─────────────────────────────┐ │
│                            │  │ 激光器是整个设备的心脏...    │ │
│                            │  │ [编辑笔记]                  │ │
│                            │  └─────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 核心功能特点

### 1. 可交互的结构图
- 设备整体图，每个零件都可以点击
- 鼠标悬停显示零件名称
- 点击后在右侧显示详情
- 支持SVG格式的可交互图示

### 2. 零件关系展示
- 显示当前零件与其他零件的连接关系
- 用箭头和线条表示数据流、物理连接等
- 可以快速跳转到相关零件
- 层次化的组件关系图

### 3. 多媒体支持
- 支持多张图片：实物照片、剖面图、安装图等
- 可以上传示意图、手绘图
- 支持简单的标注功能
- 图片缩放和查看功能

### 4. 层次化信息
- 设备 → 子系统 → 零件 → 细节
- 每一层都有对应的图示和说明
- 面包屑导航，方便跳转
- 分类和标签管理

### 5. 个人笔记系统
- 每个设备/零件都可以添加个人理解
- 支持文本编辑和图片插入
- 搜索功能支持笔记内容
- 笔记历史记录

## 数据结构设计

### 设备表 (equipment)
- id, name, category, description
- main_image, structure_diagram
- created_at, updated_at

### 零件表 (components) 
- id, equipment_id, name, function
- position_x, position_y (在结构图中的位置)
- images, description
- importance_level

### 零件关系表 (component_relations)
- id, from_component_id, to_component_id
- relation_type (物理连接/数据传输/控制关系等)
- description

### 个人笔记表 (personal_notes)
- id, target_type, target_id
- content, images
- created_at, updated_at

## 技术实现要点

### 前端技术
- React + TypeScript
- SVG交互图示组件
- 图片上传和管理
- 富文本编辑器(笔记功能)
- 响应式布局

### 后端API
- 设备和零件CRUD
- 图片文件上传处理
- 搜索和筛选功能
- 个人笔记管理

### 集成方式
- 在现有系统中新增"知识库"模块
- 复用现有的认证和UI组件
- 与现有数据库扩展新表

## 开发计划

### 第一阶段 - 基础功能
- 设备和零件的基本CRUD
- 简单的列表和详情页面
- 图片上传功能
- 基础搜索功能

### 第二阶段 - 交互增强
- 可交互的SVG结构图
- 零件关系可视化
- 个人笔记功能
- 标签和分类管理

### 第三阶段 - 体验优化
- 高级搜索和筛选
- 图片标注功能
- 导入导出功能
- 移动端适配

---

*创建时间：2025-01-18*
*状态：设计阶段*