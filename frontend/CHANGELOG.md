# 更新日志 / Changelog

## [2.0.3] - 2025-08-15

### 🔍 全局搜索功能完善
- **新增**: 考勤模块搜索支持，支持搜索员工考勤记录、请假、加班等异常情况
- **修复**: 考勤异常搜索逻辑，解决中文关键词与数据库枚举值映射问题
- **修复**: 搜索结果显示"未知员工"问题，确保正确关联员工信息
- **优化**: 搜索结果导航逻辑，支持从搜索结果直接跳转到考勤管理页面

### 🎨 用户体验优化  
- **移除**: 搜索示例中的测试数据（如"张三"），改为通用示例
- **移除**: 移动端测试页面中的具体姓名，改为"员工A"、"员工B"等通用标识
- **优化**: 搜索示例文案，提供更实用的搜索指导

### 🧹 代码质量提升
- **清理**: 移除所有前端console.log调试日志，提升生产环境代码质量
- **清理**: Toast组件、VSCodeLayout等核心组件的调试输出
- **清理**: 考勤管理相关组件和Store中的调试信息
- **优化**: 错误处理逻辑，移除冗余的控制台输出

### 🔧 技术改进
- **重构**: 考勤异常搜索API，分离按原因搜索和按员工搜索的逻辑
- **增强**: 中文搜索关键词智能映射（请假→leave、加班→overtime等）
- **完善**: 搜索结果去重机制，避免重复显示相同记录
- **优化**: 搜索性能，支持并行查询和结果合并

### 📝 搜索功能详细说明
#### 支持的搜索类型：
- **考勤异常记录**: 按请假、加班、缺勤、迟到、早退等类型搜索
- **员工信息**: 按员工姓名、工号搜索相关考勤记录  
- **项目、工人、图纸、材料**: 原有搜索功能保持不变

#### 搜索示例：
- 输入"请假"：查找所有请假记录
- 输入"加班"：查找所有加班记录
- 输入员工姓名：查找该员工的所有考勤异常记录
- 输入厚度如"3mm"：查找相关材料库存

---

## [2.0.2] - 2025-08-14

### ✨ 新增功能 / New Features

#### 📱 移动端专属组件系统
- **StatCardSwiper**: 移动端统计卡片轮播组件
  - 支持触摸滑动浏览统计数据
  - 自动轮播功能（5秒间隔）
  - 响应式设计，移动端显示大卡片，桌面端显示紧凑网格
  - 装饰性背景和优雅的动画效果

- **MobileEmployeeCard**: 移动端员工卡片组件
  - 卡片式员工信息展示，替代移动端表格布局
  - 触摸友好的大按钮和交互区域
  - 简洁的信息层级：姓名、职位、联系方式、入职时间
  - 悬浮动画效果和状态指示

- **MobileFormWizard**: 移动端分步表单向导
  - 复杂表单拆分为多步骤，降低认知负担
  - 进度指示器和步骤导航
  - 表单验证和错误处理
  - 支持前后步骤切换

- **MobileStatsOverview**: 移动端统计概览组件
  - 紧凑的统计信息显示
  - 彩色图标和数值展示
  - 动画加载效果

#### 🖥️ 响应式设计优化
- **条件渲染策略**: 使用 `lg:hidden` 和 `hidden lg:block` 实现移动端和桌面端完全不同的交互模式
- **移动端测试页面**: `/mobile-test` 路由，用于独立测试移动端组件功能
- **触摸优化**: 所有移动端组件针对触摸操作优化，增大点击区域

### 🔧 功能改进 / Improvements

#### 考勤管理系统优化
- **AttendanceStatistics**: 集成 ResponsiveStatCards 组件，替代原有静态网格布局
- **EmployeeManagement**: 添加移动端员工卡片和统计概览集成
- **AttendanceManagement**: 移除页面标题栏，界面更简洁
- **员工列表排序**: 所有考勤模块的员工列表按工号升序排序
  - 无工号员工按姓名排序并排在后面
  - 保持跨页面的一致性

#### UI/UX 改进
- **移除头像显示**: 考勤系统所有模块（今日考勤、员工管理、统计报表）不再显示员工头像
  - 移动端员工卡片简化显示
  - 桌面端表格去除头像列
  - 考勤表格优化空间利用
- **移动端信息精简**: 移动端员工卡片不显示工号和车间信息，节省屏幕空间

### 📊 考勤系统增强 / Attendance System Enhancements

#### 数据展示优化
- **统计数据排序**: 员工统计详情表格按工号排序显示
- **响应式统计卡片**: 移动端轮播模式，桌面端网格模式
- **信息密度优化**: 移动端显示核心信息，桌面端保持完整信息

#### 交互体验提升
- **移动端卡片交互**: 卡片悬浮效果和触摸反馈
- **分步表单**: 复杂员工信息录入采用向导模式
- **统一的视觉风格**: 所有移动端组件采用统一的圆角、阴影和动画

### 🐛 修复问题 / Bug Fixes

- **TypeScript 类型错误**: 修复 mobile-test 页面的 Employee 类型定义问题
- **构建兼容性**: 确保所有新组件通过 Next.js 构建验证
- **响应式布局**: 修复移动端组件在不同屏幕尺寸下的显示问题

### 🔨 技术改进 / Technical Improvements

#### 组件架构优化
- **条件渲染模式**: 移动端和桌面端使用不同组件，而非简单的响应式压缩
- **组件复用性**: 新建的移动端组件具有良好的可复用性和扩展性
- **类型安全**: 所有新组件具有完整的 TypeScript 类型定义

#### 性能优化
- **动画优化**: 使用 Framer Motion 实现流畅的动画效果
- **懒加载**: 组件按需加载，提高首屏性能
- **内存管理**: 合理的组件卸载和事件清理

### 📱 移动端适配详情 / Mobile Adaptation Details

#### 考勤管理移动端适配
- **今日考勤**: 保持表格形式（用户满意），优化触摸操作
- **员工管理**: 
  - 移动端: 卡片列表 + 分步表单向导
  - 桌面端: 传统表格 + 模态框表单
- **统计报表**: 
  - 移动端: 统计卡片轮播 + 简化员工表格
  - 桌面端: 网格布局 + 完整数据表格

#### 交互模式差异
- **移动端**: 垂直滚动、卡片交互、分步操作、触摸滑动
- **桌面端**: 表格操作、模态框、全量信息显示、鼠标交互

### 📁 新增文件 / New Files

- `components/ui/StatCardSwiper.tsx` - 响应式统计卡片组件
- `components/ui/MobileEmployeeCard.tsx` - 移动端员工卡片组件  
- `components/ui/MobileFormWizard.tsx` - 移动端表单向导组件
- `app/mobile-test/page.tsx` - 移动端组件测试页面
- `CHANGELOG.md` - 版本更新日志

### ⚠️ 重要提醒 / Important Notes

- **设计理念变化**: 从响应式压缩改为移动端专用组件设计
- **测试建议**: 建议在实际移动设备上测试新的交互体验
- **向后兼容**: 桌面端功能和界面保持不变
- **性能提升**: 移动端加载速度和交互响应显著改善

---

## [2.0.1] - 2025-08-13

### 初始移动端适配
- 基础响应式布局调整
- 移动端组件框架搭建

---

## [2.0.0] - 2025-08-12

### 主要功能
- 完整的激光切割生产管理系统
- 项目管理、材料追踪、工人资源管理
- VS Code 风格界面设计
- 考勤管理系统集成